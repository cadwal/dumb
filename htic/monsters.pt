/* DUMB: A Doom-like 3D game engine.
 *
 * htic/monsters.pt: Heretic monsters.
 * Copyright (C) 1999 by Kalle Niemitalo <tosi@stekt.oulu.fi>
 * Copyright (C) 1998 by Josh Parsons <josh@coombs.anu.edu.au>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111,
 * USA.
 */

#define NormalRate   100msec
#define OuchRate     275msec
#define DieRate      160msec
#define ExplodeRate  130msec
#define RespawnRate  200msec


/* the Player */

SoundType PLRPAI /*Chance 3*/

SoundType PLRDTH*
  Random PLRDTH
  Random PLRCDTH
  Random PLRWDTH

#define SigStunned

PhaseTable DeadPlayer
  Default Duration RespawnRate
  Phase INIT "P" Goto INIT
  Phase ANIM "O" SigReAnimate
  Phase -    "N"
  Phase -    "M"
  Phase -    "L"
  Phase -    "K"
  Phase -    "J"
  Phase -    "I"
  Phase -    "A" Become

Proto DeadPlayer
  Sprite "PLAY"
  Size 40 16
  Mass 1000 YMoveOnly
  Becomes 1

PhaseTable ExPlayer
  Default Duration RespawnRate
  Phase INIT "Y" Goto INIT
  Phase ANIM "X" SigReanimate
  Phase -    "W"
  Phase -    "V"
  Phase -    "U"
  Phase -    "T"
  Phase -    "S"
  Phase -    "R"
  Phase -    "Q"
  Phase -    "A" Become

Proto ExPlayer
  Sprite "PLAY"
  Size 40 16
  Mass 1000 YMoveOnly
  Becomes 1

SoundType DSPLPAIN Chance 3

PhaseTable Player
  Default Duration NormalRate
  Phase INIT    "A"
  Phase -	"B"
  Phase -	"C"
  Phase -	"D"   Goto INIT

  /* player shooting needs to be like this because the actual shooting
     is done asychronously by a bogothing */
  Phase SHOOT   "F"   Glow SigShoot
  Phase -	"E"   Duration OuchRate Goto INIT

  Phase OUCH    "G"   SigOuch Sound PLRPAI Duration OuchRate Goto INIT

  Phase WINDED  "H"   SigStunned Sound PLROOF Goto INIT

  Default NoSigs Duration DieRate
  Phase DIE     "I"   SigDie Sound PLRDTH*
  Phase -	"J"
  Phase -	"K"
  Phase -	"L"
  Phase -	"M"
  Phase -	"N"
  Phase -	"O"
  Phase -	"P"   Become

  Phase EXPLODE "Q"   SigExplode Sound PLRDTH*
  Phase -	"R"
  Phase -	"S"
  Phase -	"T"
  Phase -	"U"
  Phase -	"V"
  Phase -	"W"
  Phase -	"X"
  Phase -	"Y"   Become2

Proto Player 1
  Phases Player
  Sprite "PLAY"
  Size 32 56
  Mass 100
  Hits 80
  Beastie Blocking Player
  Becomes DeadPlayer
  Become2 ExPlayer
Proto Player2 2
  Phases Player
  Sprite "PLAY"
  Size 32 56
  Mass 100
  Hits 80
  Beastie Blocking Player
  Becomes DeadPlayer
  Become2 ExPlayer
Proto Player3 3
  Phases Player
  Sprite "PLAY"
  Size 32 56
  Mass 100
  Hits 80
  Beastie Blocking Player
  Becomes DeadPlayer
  Become2 ExPlayer
Proto Player4 4
  Phases Player
  Sprite "PLAY"
  Size 32 56
  Mass 100
  Hits 80
  Beastie Blocking Player
  Becomes DeadPlayer
  Become2 ExPlayer


/* Imp */

PhaseTable DeadImp
  Phase DEAD    "L"      Goto DEAD

  Default Duration RespawnRate
  Default NoSigs

  Phase RESPAWN "L"      SigReanimate
  Phase -       "K"
  Phase -       "J"
  Phase -       "I"
  Phase -       "H"      Become


PhaseTable ExImp
  Phase DEAD    "Z"      Goto DEAD

  Default Duration RespawnRate
  Default NoSigs

  Phase RESPAWN "Z"      SigReanimate
  Phase -       "Y"
  Phase -       "X"
  Phase -       "W"
  Phase -       "V"
  Phase -       "U"
  Phase -       "T"
  Phase -       "S"      Become

Proto DeadImp
  Sprite "IMPX"
  Size 40 16
  Mass 100
  Becomes 66

Proto ExImp
  Sprite "IMPX"
  Size 40 16
  Mass 200
  Becomes 66

SoundType IMPAT
  Random IMPAT1
  Random IMPAT2

SoundType IMPPAI Bend 6 Chance 3

PhaseTable Imp
  Default Duration NormalRate

  Phase IDLE    "A"       Idle Goto IDLE

  Phase SIGHT   "A"       SigDetect Sound IMPSIT

  Phase MOVE    "A"
  Phase -       "B"       Strategy
  Phase -       "C"       Strategy
  Phase -       "B"       Strategy Goto MOVE

  Phase SHOOT   "D"       Glow
  Phase -       "E"       Glow Shoot Sound IMPAT
  Phase -       "F"       Glow Goto MOVE

  Phase FIGHT   "D"       SigFight Glow
  Phase -       "E"       Glow Melee Sound IMPAT
  Phase -       "F"       Glow Goto MOVE

  Phase OUCH    "G"       SigOuch Sound IMPPAI Duration OuchRate Goto MOVE

  Default Duration DieRate
  Default NoSigs
  Phase DIE     "H"       SigDie Sound IMPDTH
  Phase -       "I"
  Phase -       "J"
  Phase -       "K"
  Phase -       "L"       Become

  Default Duration ExplodeRate
  Default Glow
  Phase BOOM    "S"       SigExplode
  Phase -       "T"       Sound RIPSLOP
  Phase -       "U"
  Phase -       "V"
  Phase -       "W"
  Phase -       "X"
  Phase -       "Y"
  Phase -       "Z"       Become2

Proto Imp 66
  Sprite "IMPX"
  Size 50 35
  Hits 8 /* 4 hits with elvenwand */
  Mass 100
  Beastie Blocking CanFly
  Damage 3
  Shoots ImpZap ImmuneToSuch
  Becomes DeadImp
  Become2 ExImp
  Speed 2000/sec

Proto ImpLeader 5
  Phases Imp
  Sprite "IMPX"
  Size 50 35
  Hits 18 /* 9 hits with elvenwand */
  Mass 100
  Beastie Blocking CanFly
  Damage 4
  Shoots ImpZap ImmuneToSuch
  Becomes DeadImp
  Become2 ExImp
  Speed 2000/sec
  SigShoot SHOOT


/* Sabreclaw */

PhaseTable DeadSabreclaw
  Phase DEAD    "O"      Goto DEAD

  Default Duration RespawnRate
  Default NoSigs

  Phase RESPAWN "O"      SigReanimate
  Phase -       "N"
  Phase -       "M"
  Phase -       "L"
  Phase -       "K"
  Phase -       "J"
  Phase -       "I"      Become

Proto DeadSabreclaw
  Sprite "CLNK"
  Size 51 16
  Mass 100
  Becomes 90

SoundType CLKACT Chance -20

PhaseTable Sabreclaw
  Default Duration NormalRate

  Phase IDLE    "A"       Idle Goto IDLE

  Phase SIGHT   "A"       SigDetect Sound CLKSIT

  Phase MOVE    "A"       Strategy Sound CLKACT
  Phase -       "B"       Strategy
  Phase -       "C"       Strategy
  Phase -       "D"       Strategy Goto MOVE

  Phase FIGHT   "E"       SigFight
  Phase -       "F"       Melee Sound CLKATK
  Phase -       "G"       Goto MOVE

  Phase OUCH    "H"       SigOuch Sound CLKPAI Duration OuchRate Goto MOVE

  Default Duration DieRate
  Default NoSigs
  Phase DIE     "I"       SigDie Sound CLKDTH
  Phase -       "J"
  Phase -       "K"
  Phase -       "L"
  Phase -       "M"
  Phase -       "N"
  Phase -       "O"       Become

Proto Sabreclaw 90
  Sprite "CLNK"
  Size 47 67
  Hits 15
  Mass 100
  Beastie Blocking SkirtCliffs
  Damage 20
  Becomes DeadSabreclaw
  Speed 2000/sec


/* Mummy */

PhaseTable MummySpirit
  Default Duration 300msec
  Phase - "Q" Duration 600msec
  Phase - "R"
  Phase - "S"
  Phase - "T"
  Phase - "U" Spawn2
  Phase - "V"
  Phase - "W" Destroy

Proto MummySpirit
  Sprite "MUMM"
  Mass 1000 YMoveOnly
  Speed 2000/sec
  Phantom ZCenter FloatsUp
  Spawn2 CorpseWandAmmo

Proto MummyLeaderSpirit
  Phases MummySpirit
  Sprite "MUMM"
  Mass 1000 YMoveOnly
  Speed 3000/sec
  Phantom ZCenter FloatsUp
  Spawn2 HeftyWandAmmo

PhaseTable DeadMummy
  Phase DEAD    "P"      Goto DEAD

  Default Duration RespawnRate
  Default NoSigs

  Phase RESPAWN "P"      SigReanimate
  Phase -       "O"
  Phase -       "N"
  Phase -       "M"
  Phase -       "L"
  Phase -       "K"
  Phase -       "J"
  Phase -       "I"      Become

Proto DeadMummy
  Sprite "MUMM"
  Size 40 16
  Mass 100
  Becomes 46 /* reanimated Mummy becomes MEAN */

SoundType MUMAT
  Random MUMAT1
  Random MUMAT2

SoundType MUMPAI Bend 6 Chance 3

PhaseTable Mummy
  Default Duration NormalRate

  Phase IDLE    "A"       Idle Goto IDLE

  Phase SIGHT   "A"       SigDetect Sound MUMSIT

  Phase MOVE    "A"
  Phase -       "B"       Strategy
  Phase -       "C"
  Phase -       "D"       Strategy Goto MOVE

  Phase FIGHT   "E"       SigFight
  Phase -       "F"       Melee Sound MUMAT
  Phase -       "G"       Goto MOVE

  Phase OUCH    "H"       SigOuch Sound MUMPAI Duration OuchRate Goto MOVE

  Default Duration 400msec
  Phase SHOOT   "X"       Glow
  Phase -       "Y"       Glow Shoot Sound MUMAT /* right sound? */ Goto MOVE

  Default Duration DieRate
  Default NoSigs
  Phase DIE     "I"       SigDie Sound MUMDTH
  Phase -       "J"       Spawn2
  Phase -       "K"
  Phase -       "L"
  Phase -       "M"
  Phase -       "N"
  Phase -       "O"
  Phase -       "P"       Become
  Phase ALTDIE  "I"       Sound MUMDTH
  Phase -       "J"
  Phase -       "K"
  Phase -       "L"
  Phase -       "M"
  Phase -       "N"
  Phase -       "O"
  Phase -       "P"       Destroy


Proto Mummy 68
  Phases Mummy
  Sprite "MUMM"
  Size 40 64
  Hits 16 /* 8 hits with elvenwand */
  Mass 100
  Beastie Blocking SkirtCliffs
  Damage 10
  Shoots MummyZap ImmuneToSuch
  Spawn2 MummySpirit
  Becomes DeadMummy
  Speed 1800/sec

Proto GhostMummy 69
  Phases Mummy
  Sprite "MUMM"
  Size 40 64
  Hits 24
  Pinvis
  Mass 100
  Beastie Blocking SkirtCliffs
  Damage 12
  Shoots MummyZap ImmuneToSuch
  Becomes DeadMummy
  SigDie ALTDIE
  Speed 2200/sec

Proto MummyLeader 45
  Phases Mummy
  Sprite "MUMM"
  Size 40 64
  Hits 20 /* 10 hits with elvenwand */
  Mass 100
  Beastie Blocking SkirtCliffs
  Damage 15
  Shoots MummyZap ImmuneToSuch
  Spawn2 MummyLeaderSpirit
  Becomes DeadMummy
  SigShoot SHOOT
  Speed 1500/sec

Proto GhostMummyLeader 46
  Phases Mummy
  Sprite "MUMM"
  Size 40 64
  Hits 30
  Pinvis
  Mass 100
  Beastie Blocking SkirtCliffs
  Damage 17
  Shoots MummyZap ImmuneToSuch
  SigShoot SHOOT
  SigDie ALTDIE
  Becomes DeadMummy
  Speed 1800/sec


/* Chaos Knights */

PhaseTable DeadKnight
  Phase DEAD    "O"      Goto DEAD

  Default Duration RespawnRate
  Default NoSigs

  Phase RESPAWN "O"      SigReanimate
  Phase -       "N"
  Phase -       "M"
  Phase -       "L"
  Phase -       "K"
  Phase -       "J"
  Phase -       "I"      Become

Proto DeadKnight
  Sprite "KNIG"
  Size 40 16
  Mass 100
  Becomes 64

SoundType KGTPAI Bend 6 Chance 3

PhaseTable Knight
  Default Duration NormalRate
  Phase INIT	"A"	Idle Goto INIT

  Phase SIGHT   "A"	SigDetect Sound KGTSIT

  Phase MOVE    "A"	Strategy
  Phase -	"B"
  Phase -	"C"	Strategy
  Phase -	"D"	Goto MOVE

  Phase SHOOT	"E"	SigShoot Sound KGTATK
  Phase -	"F"	Shoot
  Phase -	"G"	Goto MOVE

  Phase FIGHT   "E"	SigFight Sound KGTAT2
  Phase -	"F"	Melee
  Phase -	"G"	Goto MOVE

  Phase OUCH	"H"	SigOuch Duration OuchRate Sound KGTPAI Goto MOVE

  Default NoSigs Duration DieRate
  Phase DIE	"I"	SigDie Sound KGTDTH
  Phase -	"J"	Spawn2
  Phase -	"K"
  Phase -	"L"
  Phase -	"M"
  Phase -	"N"
  Phase -	"O"	Become


Proto Knight 64
  Sprite "KNIG"
  Size 40 80
  Hits 42 /* 21 hits with elvenwand */
  Mass 100
  Beastie Blocking SkirtCliffs
  Shoots GreenAxe ImmuneToSuch
  Becomes DeadKnight
  Spawn2 WimpyBowAmmo
  Damage 10
  Speed 2000/sec

Proto GhostKnight 65
  Sprite "KNIG"
  Phases Knight
  Size 40 80
  Hits 63
  Mass 100
  Beastie Blocking SkirtCliffs PInvis
  Shoots RedAxe ImmuneToSuch
  Spawn2 WimpyBowAmmo
  Damage 15
  Speed 2300/sec


/* WereDragon */

PhaseTable DeadWereDragon
  Phase DEAD    "Z"      Goto DEAD

  Default Duration RespawnRate
  Default NoSigs

  Phase RESPAWN "Z"      SigReanimate
  Phase -       "Y"
  Phase -       "X"
  Phase -       "W"
  Phase -       "V"
  Phase -       "U"
  Phase -       "T"
  Phase -       "S"
  Phase -       "R"
  Phase -       "G"      Become

Proto DeadWereDragon
  Sprite "BEAS"
  Size 80 16
  Mass 200
  Becomes 70

PhaseTable ExWereDragon
  Phase DEAD    "Q"      Goto DEAD

  Default Duration RespawnRate
  Default NoSigs

  Phase RESPAWN "Q"      SigReanimate
  Phase -       "P"
  Phase -       "O"
  Phase -       "N"
  Phase -       "M"
  Phase -       "L"
  Phase -       "K"
  Phase -       "J"      Become

Proto ExWereDragon
  Sprite "BEAS"
  Size 80 16
  Mass 200
  Becomes 70

SoundType BSTPAI Bend 6 Chance 3
SoundType BSTACT Chance -10

PhaseTable WereDragon
  Default Duration NormalRate
  Phase INIT	"A"	Idle Goto INIT

  Phase SIGHT   "A"	SigDetect Sound BSTSIT

  Phase MOVE    "A"	Strategy Sound BSTACT
  Phase -	"B"
  Phase -	"C"	Strategy
  Phase -	"D"
  Phase -	"E"	Strategy
  Phase -	"F"	Goto MOVE

  Phase SHOOT	"H"	Duration 200msec SigShoot Sound BSTATK
  Phase -	"I"	Duration 150msec
  Phase -	"I"	Duration 200msec Shoot
  Phase -	"H"	Duration 200msec Goto MOVE

  Phase OUCH	"G"	SigOuch Duration OuchRate Sound BSTPAI Goto MOVE

  Default NoSigs Duration DieRate
  Phase DIE	"G"	SigDie Sound BSTDTH
  Phase -	"R"	
  Phase -	"S"
  Phase -	"T"
  Phase -	"U"
  Phase -	"V"
  Phase -	"W"
  Phase -	"X"
  Phase -	"Y"
  Phase -	"Z"	Become

  Phase EXPLODE	"J"	SigExplode Sound BSTDTH
  Phase -	"K"	
  Phase -	"L"
  Phase -	"M"
  Phase -	"N"
  Phase -	"O"	
  Phase -	"P"
  Phase -	"Q"	Become2


Proto WereDragon 70
  Sprite "BEAS"
  Size 67 87
  Hits 20
  Mass 200
  Beastie Blocking SkirtCliffs
  Shoots WereDragonBreath
  Becomes DeadWereDragon
  Become2 ExWereDragon
  Speed 1500/sec


/* Maulotaur (9) */

PhaseTable DeadMaulotaur
  Phase DEAD    "O"      Goto DEAD

  Default Duration RespawnRate
  Default NoSigs

  Phase RESPAWN "T"      SigReanimate
  Phase -       "S"
  Phase -       "R"
  Phase -       "Q"
  Phase -       "P"
  Phase -       "O"
  Phase -       "N"
  Phase -       "M"
  Phase -       "L"
  Phase -       "K"
  Phase -       "J"
  Phase -       "I"
  Phase -       "H"
  Phase -       "G"
  Phase -       "F"
  Phase -       "E"      Become

Proto DeadMaulotaur
  Sprite "MNTR"
  Size 128 32
  Mass 200
  Becomes 9

SoundType MINPAI Bend 6 Chance 3
SoundType MINACT Chance -10

PhaseTable Maulotaur
  Default Duration NormalRate
  Phase INIT	"A"	Idle Goto INIT

  Phase SIGHT   "A"	SigDetect Sound MINSIT

  Phase MOVE    "A"	Strategy
  Phase -	"B"	Sound MINACT
  Phase -	"C"	Strategy
  Phase -	"D"	Goto MOVE

  Phase FIGHT	"Y"	SigFight Sound MINAT1
  Phase -	"Z"	Melee Goto MOVE

  Phase CHARGE	"U"	Charge Melee
  Phase -	"U"	Charge Melee
  Phase -	"U"	Charge Melee
  Phase -	"U"	Charge Melee
  Phase -	"U"	Charge Melee
  Phase -	"U"	Charge Melee
  Phase -	"U"	Charge Melee Goto MOVE

  /* a couple of chance to bail make maulotaur's missile attack rarer */ 
  Phase SHOOT	"V"	SigShoot RSkip Goto CHARGE
  Phase -	"V"	RSkip Goto CHARGE
  /* now really do the attack */
  Phase -	"W"	Sound MINAT3
  Phase -	"X"	Shoot
  Phase -	"W"	Goto MOVE

  Phase OUCH	"E"	SigOuch Duration OuchRate Sound MINPAI Goto MOVE

  Default NoSigs Duration DieRate
  Phase DIE	"E"	SigDie
  Phase -	"F"
  Phase -	"G"	Sound MINDTH
  Phase -	"H"
  Phase -	"I"
  Phase -	"J"
  Phase -	"K"
  Phase -	"L"
  Phase -	"M"
  Phase -	"O"
  Phase -	"P"
  Phase -	"Q"
  Phase -	"R"
  Phase -	"S"
  Phase -	"T"	Become


Proto Maulotaur 9
  Sprite "MNTR"
  Size 90 128
  Hits 100
  Mass 200
  Damage 15
  Beastie Blocking SkirtCliffs Nasty
  Shoots MineSpawner
  Becomes DeadMaulotaur
  Speed 2000/sec


/* Pod */

PhaseTable GrowPod
  Default Duration 80msec
  Phase INIT	"G"
  Phase -	"H"	Sound NEWPOD
  Phase -	"I"
  Phase -	"J"
  Phase -	"K"
  Phase -	"L"
  Phase -	"M"
  Phase -	"N"
  Phase -	"O"
  Phase -	"P"	Become

Proto GrowPod
  Sprite "PPOD"
  Size 30 30
  Becomes 2035
  Blocking

PhaseTable DeadPod
  Phase INIT	"A"	RndDuration 20sec
  Phase -	"A"	Become

Proto DeadPod
  Phantom
  Becomes GrowPod	

PhaseTable Pod
  Default Duration NormalRate  
  Phase	INIT	"A"	Goto INIT

  Phase OUCH    "B"	SigOuch Goto INIT

  Default Duration ExplodeRate NoSigs
  Phase	BOOM	"B"	SigDie
  Phase	-	"C"	Sound PODEXP Explode
  Phase	-	"D"
  Phase	-	"E"
  Phase	-	"F"	Become

Proto Pod 2035
  Sprite "PPOD"
  Size 45 38
  Hits 8
  Mass 70
  Damage 50
  Target Blocking
  Becomes DeadPod

/* Dark Disciple */

PhaseTable DeadDisciple
  Phase DEAD    "M"      Goto DEAD

  Default Duration RespawnRate
  Default NoSigs

  Phase RESPAWN "M"      SigReanimate
  Phase -       "L"
  Phase -       "K"
  Phase -       "J"
  Phase -       "I"
  Phase -       "H"
  Phase -       "G"
  Phase -       "F"      Become

Proto DeadDisciple
  Sprite "WZRD"
  Size 40 16
  Mass 100
  Becomes 15

SoundType WIZPAI Bend 6 Chance 3
SoundType WIZACT Bend 4 Chance -30

PhaseTable Disciple
  Default Duration NormalRate

  Phase IDLE    "A"       Idle Goto IDLE

  Phase SIGHT   "A"       SigDetect Sound WIZSIT

  Phase MOVE    "A"       Strategy
  Phase -       "B"       Goto MOVE Sound WIZACT

  Phase SHOOT   "C"       SigShoot Glow
  Phase -       "D"       Glow Shoot Sound WIZATK Goto MOVE

  Phase OUCH    "E"       SigOuch Sound WIZPAI Duration OuchRate Goto MOVE

  Default Duration DieRate
  Default NoSigs
  Phase DIE     "F"       SigDie Sound WIZDTH
  Phase -       "G"
  Phase -       "H"
  Phase -       "I"
  Phase -       "J"
  Phase -       "K"
  Phase -       "L"
  Phase -       "M"       Become


Proto Disciple 15
  Sprite "WZRD"
  Size 40 64
  Hits 20
  Mass 100
  Beastie Blocking
  Shoots WizardZap ImmuneToSuch
  ShootMany 3 20deg
  Becomes DeadDisciple
  CanFly
  Speed 1500/sec

/* Iron lich (as in E1M8) */

PhaseTable DeadIronLich
  Phase DEAD  "I"   Goto DEAD

Proto DeadIronLich
  Sprite "HEAD"
  Size 40 16
  Mass 200
  
PhaseTable IronLich
  Default Duration 200msec
  Phase IDLE  "A"   Idle Goto IDLE
  Phase SIGHT "A"   SigDetect
  Phase MOVE  "A"   Strategy Goto MOVE
  Phase SHOOT "B"   SigShoot Shoot Glow Goto MOVE
  Default NoSigs
  Phase DIE   "C"   SigDie
  Phase -     "D"
  Phase -     "E"
  Phase -     "F"
  Phase -     "G"
  Phase -     "H"
  Phase -     "I"   Become

Proto IronLich 6
  Sprite "HEAD"
  Size 80 80
  Hits 100
  Mass 1000
  Beastie Boss Blocking
  Shoots IronLichMissile
  Becomes DeadIronLich
  SeeArc 90deg
  AimArc 45deg
  Speed 800/sec

#undef NormalRate
#undef OuchRate
#undef DieRate
#undef ExplodeRate
#undef RespawnRate
