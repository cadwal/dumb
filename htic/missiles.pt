/* DUMB: A Doom-like 3D game engine.
 *
 * htic/missiles.pt: Various kinds of Missile.
 * Copyright (C) 1999 by Kalle Niemitalo <tosi@stekt.oulu.fi>
 * Copyright (C) 1998 by Josh Parsons <josh@coombs.anu.edu.au>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111,
 * USA.
 */

#define TargetSeek  HeatSeek

#define NormalRate 100msec
#define ExplodeRate 150msec

PhaseTable WandZap
  Default Duration 50msec
  Default Glow

  Phase BOOM "C"  Melee
  Phase -    "D"
  Phase -    "E"
  Phase -    "F"
  Phase -    "G"
  Phase -    "H"  Destroy

Proto WandZap
  Sprite "FX01"
  Size 16 16
  Damage 2
  Explosive ZCenter
  Phantom BecomesBlood BulletAttack
  Speed 6400/sec

PhaseTable Mine
  Default Duration 50msec
  Default Glow

  Phase INIT	"H"	 TInvis NoSigs
  Phase -	"H"	 NoSigs
  Phase -	"G"	 NoSigs
  Phase -	"F"	 
  Phase -	"E"	 
  Phase -	"D"	 
  Phase -	"C"	 
  Phase -	"B"
  Phase -	"C"	 
  Phase -	"D"	 
  Phase -	"E"	 
  Phase -	"F"	 
  Phase -	"G"	 NoSigs
  Phase -	"H"	 NoSigs Destroy	

  Default Duration 100msec NoSigs
  Phase BOOM	"I"	 SigExplode Sound LOBHIT
  Phase	-	"J"	 Explode
  Phase -	"K"	 
  Phase	-	"L"	 
  Phase	-	"M"	 Destroy

Proto Mine
  Sprite "FX13"
  Size 48 48
  Damage 20
  Mine StuckDown NoHurtOwner

PhaseTable MineSpawner
  Phase INIT	"A" Duration 350msec /* wait a bit before we start spawning */
  Phase LOOP	"B" Duration 120msec Spawn2 TargetSeek Goto LOOP
  Phase BOOM	"A" SigExplode Destroy

Proto MineSpawner
  Size 16 16
  Damage 0
  Mass 0
  Explosive NoHurtOwner
  Spawn2 Mine
  Speed 6400/sec


/* Neat trick: ArrowZaps inflict their damage in two goes */

PhaseTable ArrowZap
  Default Duration 100msec
  Default Glow

  Phase INIT "A"  Goto INIT

  Default Duration 50msec
  Default NoSigs
  Phase BOOM "A"  SigExplode
  Phase -    "B"
  Phase -    "D"  Explode Sound PHOHIT
  Phase -    "E"
  Phase -    "F"
  Phase -    "G"
  Phase -    "H"  Explode
  Phase -    "I"
  Phase -    "J"  Destroy

Proto ArrowZap
  Sprite "FX03"
  Size 16 16
  Damage 3
  Mass 0
  Explosive ZCenter
  Speed 12000/sec
  NoHurtOwner

PhaseTable ClawZap
  Default Duration 100msec
  Default Glow

  Phase INIT "A"
  Phase -    "B"  Goto INIT

  Default Duration 50msec
  Default NoSigs
  Phase BOOM "C"  Explode SigExplode Sound BLSHIT
  Phase -    "D"
  Phase -    "E"
  Phase -    "F"
  Phase -    "G"
  Phase -    "H"  Destroy

Proto ClawZap
  Sprite "FX17"
  Size 10 10
  Damage 6
  Mass 0
  Speed 12000/sec
  Explosive ZCenter


PhaseTable WizardZap
  Duration NormalRate Glow
  Phase INIT "A"
  Phase -    "B" Goto INIT
  Default Duration ExplodeRate
  Default NoSigs
  Phase BOOM "C" SigExplode Explode
  Phase -    "D"
  Phase -    "E"
  Phase -    "F"
  Phase -    "G" Destroy

Proto WizardZap
  Sprite "FX11"
  Size 16 16
  Damage 6
  Mass 0
  Speed 6400/sec
  Explosive ZCenter


PhaseTable ImpZap
  Duration NormalRate Glow
  Phase INIT "A"
  Phase -    "B"
  Phase -    "C" Goto INIT
  Default Duration ExplodeRate
  Default NoSigs
  Phase BOOM "C" SigExplode Explode
  Phase -    "D"
  Phase -    "E"
  Phase -    "F" Destroy

Proto ImpZap
  Sprite "FX10"
  Size 16 16
  Damage 3
  Mass 0
  Speed 6400/sec
  Explosive ZCenter


PhaseTable MummyZap
  Default Duration 35msec
  Default Glow

  Phase INIT "A" TargetSeek
  Phase -    "A" TargetSeek
  Phase -    "B" TargetSeek
  Phase -    "B" TargetSeek
  Phase -    "C" TargetSeek
  Phase -    "C" TargetSeek Goto INIT

  Default Duration ExplodeRate
  Default NoSigs
  Phase BOOM "C"  SigExplode Explode Sound MUMHED
  Phase -    "D"
  Phase -    "E"
  Phase -    "F"
  Phase -    "G" Destroy

Proto MummyZap
  Sprite "FX15"
  Size 16 16
  Damage 6
  Mass 0
  Speed 6400/sec
  Explosive ZCenter

PhaseTable WereDragonBreath
  Default Duration 50msec
  Default Glow

  Phase INIT "A"
  Phase -    "B"
  Phase -    "C" Goto INIT

  Default Duration ExplodeRate
  Default NoSigs
  Phase BOOM "D"  SigExplode Explode Sound LOBHIT
  Phase -    "E"
  Phase -    "F"
  Phase -    "G" Destroy

Proto WereDragonBreath
  Sprite "FX06"
  Size 40 40
  Damage 18
  Mass 0
  Speed 6400/sec
  Explosive ZCenter


PhaseTable GreenAxe
  Default Duration 100msec
  Phase INIT	"A"
  Phase -	"B"
  Phase -	"C" Goto INIT
  Default NoSigs Duration ExplodeRate
  Phase BOOM	"D" SigExplode Explode
  Phase -	"E"
  Phase -	"F" Destroy

PhaseTable RedAxe
  Default Duration 100msec
  Phase INIT	"A"
  Phase -	"B" Goto INIT
  Default NoSigs Duration ExplodeRate
  Phase BOOM	"C" SigExplode Explode
  Phase -	"D"
  Phase -	"E" Destroy

Proto GreenAxe
  Sprite "SPAX"
  Size 16 16
  Damage 15
  Mass 0
  Speed 6400/sec
  Explosive ZCenter

Proto RedAxe
  Sprite "RAXE"
  Size 16 16
  Damage 25
  Mass 0
  Speed 6400/sec
  Explosive ZCenter


PhaseTable IronLichMissileShard
  Default Duration 100msec
  Phase INIT "H"
  Phase -    "I"
  Phase -    "J" Goto INIT
  Default NoSigs Duration ExplodeRate
  Phase BOOM "D" SigExplode Explode
  Phase -    "E"
  Phase -    "F"
  Phase -    "G" Destroy

Proto IronLichMissileShard
  Sprite "FX05"
  Size 16 8
  Mass 0
  Speed 6400/sec
  Damage 10
  Explosive ZCenter NoHurtOwner

PhaseTable IronLichMissile
  Default Duration 100msec
  Phase INIT "A"
  Phase -    "B"
  Phase -    "C" Goto INIT
  Default NoSigs Duration ExplodeRate
  Phase BOOM "D" SigExplode Explode Spawn
  Phase -    "E"
  Phase -    "F"
  Phase -    "G" Destroy

Proto IronLichMissile
  Sprite "FX05"
  Size 16 16
  Mass 0
  Speed 6400/sec
  Damage 20 /* plus 8*10 from shards ;) */
  Spawns IronLichMissileShard
  ShootMany 8 315deg /* first and last would overlap with 360deg */
  Explosive ZCenter NoHurtOwner

PhaseTable IronLichTyphoon
  Default Duration 100msec
  Phase INIT "D"  HeatSeek NoSigs
  Phase -    "E"  HeatSeek NoSigs
  Phase -    "F"  HeatSeek NoSigs
  Phase -    "G"  HeatSeek NoSigs
  Phase MOVE "A"  HeatSeek Whirly Melee
  Phase -    "B"  HeatSeek Whirly Melee
  Phase -    "C"  HeatSeek Whirly Melee Goto MOVE
  Phase DIE  "G"  HeatSeek NoSigs SigDie
  Phase -    "F"  HeatSeek NoSigs
  Phase -    "E"  HeatSeek NoSigs
  Phase -    "D"  HeatSeek NoSigs Destroy

Proto IronLichTyphoon
  Sprite "FX07"
  Damage 10
  Mass 0 CanFly
  Speed 3000/sec


PhaseTable TeleportFog
  Default Duration 200msec
  Default Glow

  Phase TELEPORT "G"
  Phase -        "E"
  Phase -        "C"

  Phase -        "A" Sound TELEPT
  Phase -        "B"
  Phase -        "C"
  Phase -        "D"
  Phase -        "E"
  Phase -        "F"
  Phase -        "G"
  Phase -        "H" Destroy


Proto TeleportFog
  Sprite "TELE"
  Phantom ZCenter

Proto TeleSpot 14
  Phases Mundane
  Phantom


#undef ExplodeRate
#undef NormalRate

#undef TargetSeek
